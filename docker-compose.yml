zookeeper:
  image: "wurstmeister/zookeeper"
  ports:
    - "2181"

kafka:
  image: "wurstmeister/kafka"
  ports:
    - "9092"
  links:
    - "zookeeper:zk"
  environment:
    KAFKA_ADVERTISED_HOST_NAME: "172.17.42.1"
  volumes:
    - "/var/run/docker.sock:/var/run/docker.sock"

fanout:
  build: "./fanout"
  dockerfile: "./Dockerfile"
  ports:
    - "4987"
  links:
    - "kafka:kafka"
  command: "--id test_service --topic test_topic"

integration:
  build: "./fanout"
  dockerfile: "./integration/Dockerfile"
  links:
    - "kafka:kafka"
    - "fanout:fanout"
